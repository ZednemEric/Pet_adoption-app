{"filter":false,"title":"getPets.py","tooltip":"/backend/handlers/get_pets/getPets.py","undoManager":{"mark":10,"position":10,"stack":[[{"start":{"row":0,"column":0},"end":{"row":1,"column":15},"action":"insert","lines":["wget https://aws-tc-largeobjects.s3.us-west-2.amazonaws.com/SPL-PW-300-DVF400-1/week2.zip","unzip week2.zip"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":15},"action":"remove","lines":["wget https://aws-tc-largeobjects.s3.us-west-2.amazonaws.com/SPL-PW-300-DVF400-1/week2.zip","unzip week2.zip"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":26,"column":5},"action":"insert","lines":["import boto3","import os","import json","","def lambda_handler(event, context):","    # Retrieve the table name and region from environment variables","    table_name = 'PetsTable'","    region_name = os.environ['AWS_REGION'] ","","    # Initialize a DynamoDB client","    dynamodb = boto3.resource('dynamodb', region_name=region_name)","    table = dynamodb.Table(table_name)","    response = table.scan()","    pets = response['Items']","","    # Prepare a successful response containing the pets","    return {","        'statusCode': 200,","        'headers': {","            'Access-Control-Allow-Headers': 'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token',","            'Access-Control-Allow-Origin': '*',  # Allow requests from any origin","            'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS'","        },","        'body': json.dumps({","            'pets': pets","        })","    }"],"id":3}],[{"start":{"row":0,"column":0},"end":{"row":26,"column":5},"action":"remove","lines":["import boto3","import os","import json","","def lambda_handler(event, context):","    # Retrieve the table name and region from environment variables","    table_name = 'PetsTable'","    region_name = os.environ['AWS_REGION'] ","","    # Initialize a DynamoDB client","    dynamodb = boto3.resource('dynamodb', region_name=region_name)","    table = dynamodb.Table(table_name)","    response = table.scan()","    pets = response['Items']","","    # Prepare a successful response containing the pets","    return {","        'statusCode': 200,","        'headers': {","            'Access-Control-Allow-Headers': 'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token',","            'Access-Control-Allow-Origin': '*',  # Allow requests from any origin","            'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS'","        },","        'body': json.dumps({","            'pets': pets","        })","    }"],"id":4},{"start":{"row":0,"column":0},"end":{"row":42,"column":9},"action":"insert","lines":["import boto3","import os","import json","","def lambda_handler(event, context):","    # Retrieve the table name and region from environment variables","    table_name = 'PetsTable'","    region_name = os.environ['AWS_REGION']","","    # Initialize a DynamoDB client","    dynamodb = boto3.resource('dynamodb', region_name=region_name)","    table = dynamodb.Table(table_name)","","    try:","        response = table.scan()","        pets = response['Items']","","        # Prepare a successful response containing the pets","        return {","            'statusCode': 200,","            'headers': {","                'Access-Control-Allow-Headers': 'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token',","                'Access-Control-Allow-Origin': '*',  # Allow requests from any origin","                'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS'","            },","            'body': json.dumps({","                'pets': pets","            })","        }","    except Exception as e:","        print(e)","        # Return a server error if the scan fails","        return {","            'statusCode': 500,","            'headers': {","                'Access-Control-Allow-Headers': 'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token',","                'Access-Control-Allow-Origin': '*',  # Allow requests from any origin","                'Access-Control-Allow-Methods': 'GET,HEAD,OPTIONS'","            },","            'body': json.dumps({","                'error': str(e)","            })","        }"]}],[{"start":{"row":11,"column":4},"end":{"row":11,"column":38},"action":"remove","lines":["table = dynamodb.Table(table_name)"],"id":5},{"start":{"row":11,"column":4},"end":{"row":13,"column":0},"action":"insert","lines":["table_name = os.environ['PETS_TABLE']","",""]}],[{"start":{"row":13,"column":0},"end":{"row":14,"column":0},"action":"remove","lines":["",""],"id":6}],[{"start":{"row":15,"column":24},"end":{"row":15,"column":25},"action":"insert","lines":["_"],"id":7},{"start":{"row":15,"column":25},"end":{"row":15,"column":26},"action":"insert","lines":["n"]},{"start":{"row":15,"column":26},"end":{"row":15,"column":27},"action":"insert","lines":["m"]}],[{"start":{"row":15,"column":26},"end":{"row":15,"column":27},"action":"remove","lines":["m"],"id":8}],[{"start":{"row":15,"column":26},"end":{"row":15,"column":27},"action":"insert","lines":["a"],"id":9},{"start":{"row":15,"column":27},"end":{"row":15,"column":28},"action":"insert","lines":["m"]},{"start":{"row":15,"column":28},"end":{"row":15,"column":29},"action":"insert","lines":["r"]},{"start":{"row":15,"column":29},"end":{"row":15,"column":30},"action":"insert","lines":["e"]}],[{"start":{"row":15,"column":29},"end":{"row":15,"column":30},"action":"remove","lines":["e"],"id":10},{"start":{"row":15,"column":28},"end":{"row":15,"column":29},"action":"remove","lines":["r"]}],[{"start":{"row":15,"column":28},"end":{"row":15,"column":29},"action":"insert","lines":["e"],"id":11}]]},"ace":{"folds":[],"scrolltop":164.90910081626933,"scrollleft":0,"selection":{"start":{"row":20,"column":30},"end":{"row":20,"column":30},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1736988346650,"hash":"f14f4f8a6da0866af34dafc1f49147d67cc7642f"}